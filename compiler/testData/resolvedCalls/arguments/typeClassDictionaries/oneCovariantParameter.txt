package test

open class A1
open class A2: A1()
open class A3: A2()
open class A4: A3()
open class A5: A4()

@TypeClass
interface TC<out T> {
    fun doStuff(): T
}

object A4Member : TC<A4> {
    override fun doStuff(): A4 = A4()
}

object A5Member : TC<A5> {
    override fun doStuff(): A5 = A5()
}

//fun <T> doStuff(dictionary: TC<T>): T = dictionary.doStuff()

fun main() {
    TC.<caret>doStuff<A2>()
    TC.<caret>doStuff<A3>()
    TC.<caret>doStuff<A5>()
}


Resolved call:

Candidate descriptor: fun <out T> doStuff(_dictionary_: TC<T>): T defined in test.TC.Companion
Resulting descriptor: fun <out T> doStuff(_dictionary_: TC<A2>): A2 defined in test.TC.Companion

Explicit receiver kind = DISPATCH_RECEIVER
Dispatch receiver = TC {Synthetic Constructor}
Extension receiver = NO_RECEIVER

Resolved value arguments mapping:

SUCCESS  _dictionary_ : TC<A2> = test.A4Member


Resolved call:

Candidate descriptor: fun <out T> doStuff(_dictionary_: TC<T>): T defined in test.TC.Companion
Resulting descriptor: fun <out T> doStuff(_dictionary_: TC<A3>): A3 defined in test.TC.Companion

Explicit receiver kind = DISPATCH_RECEIVER
Dispatch receiver = TC {Synthetic Constructor}
Extension receiver = NO_RECEIVER

Resolved value arguments mapping:

SUCCESS  _dictionary_ : TC<A3> = test.A4Member


Resolved call:

Candidate descriptor: fun <out T> doStuff(_dictionary_: TC<T>): T defined in test.TC.Companion
Resulting descriptor: fun <out T> doStuff(_dictionary_: TC<A5>): A5 defined in test.TC.Companion

Explicit receiver kind = DISPATCH_RECEIVER
Dispatch receiver = TC {Synthetic Constructor}
Extension receiver = NO_RECEIVER

Resolved value arguments mapping:

SUCCESS  _dictionary_ : TC<A5> = test.A5Member
